import{j as a,r as u,R as V}from"./index-Dz1OiEwP.js";import{D as U,a as K,c as G,b as ee,C as ve,P as Ce,N as be,I as je,A as ye,g as Se}from"./Pages-GQhLz8jZ.js";import{y as $e,n as ke,j as we,o as ze,D as Fe,K as ne,b as B,E as le,s as pe,t as x,i as Re,v as Ie,x as z,w as D,B as _,T as g,a as P}from"./axiosInstance-B1e5OFV0.js";import{T as H,a as R,I as Oe,M as _e}from"./Toast-CIJJY5AF.js";import{M as W}from"./MenuItem-Yjv2Ec7j.js";import{d as Ae,a as Ee}from"./delete-B1Bqz9gE.js";import{G as ue}from"./iconBase--opDvRN2.js";import{e as Ne}from"./edit-CJ-ANpoM.js";import{D as re}from"./Divider-1oHlqpFR.js";import{D as Te}from"./DynamicTitle-BNlEasHI.js";const Me=$e(a.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function We(e){return we("MuiChip",e)}const i=ke("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Pe=e=>{const{classes:t,disabled:s,size:n,color:d,iconColor:c,onDelete:f,clickable:o,variant:l}=e,v={root:["root",l,s&&"disabled",`size${x(n)}`,`color${x(d)}`,o&&"clickable",o&&`clickableColor${x(d)}`,f&&"deletable",f&&`deletableColor${x(d)}`,`${l}${x(d)}`],label:["label",`label${x(n)}`],avatar:["avatar",`avatar${x(n)}`,`avatarColor${x(d)}`],icon:["icon",`icon${x(n)}`,`iconColor${x(c)}`],deleteIcon:["deleteIcon",`deleteIcon${x(n)}`,`deleteIconColor${x(d)}`,`deleteIcon${x(l)}Color${x(d)}`]};return Re(v,We,t)},Le=pe("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e,{color:n,iconColor:d,clickable:c,onDelete:f,size:o,variant:l}=s;return[{[`& .${i.avatar}`]:t.avatar},{[`& .${i.avatar}`]:t[`avatar${x(o)}`]},{[`& .${i.avatar}`]:t[`avatarColor${x(n)}`]},{[`& .${i.icon}`]:t.icon},{[`& .${i.icon}`]:t[`icon${x(o)}`]},{[`& .${i.icon}`]:t[`iconColor${x(d)}`]},{[`& .${i.deleteIcon}`]:t.deleteIcon},{[`& .${i.deleteIcon}`]:t[`deleteIcon${x(o)}`]},{[`& .${i.deleteIcon}`]:t[`deleteIconColor${x(n)}`]},{[`& .${i.deleteIcon}`]:t[`deleteIcon${x(l)}Color${x(n)}`]},t.root,t[`size${x(o)}`],t[`color${x(n)}`],c&&t.clickable,c&&n!=="default"&&t[`clickableColor${x(n)})`],f&&t.deletable,f&&n!=="default"&&t[`deletableColor${x(n)}`],t[l],t[`${l}${x(n)}`]]}})(Ie(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${i.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${i.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${i.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${i.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${i.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${i.icon}`]:{marginLeft:5,marginRight:-6},[`& .${i.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:z(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:z(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${i.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${i.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(D(["contrastText"])).map(([s])=>({props:{color:s},style:{backgroundColor:(e.vars||e).palette[s].main,color:(e.vars||e).palette[s].contrastText,[`& .${i.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[s].contrastTextChannel} / 0.7)`:z(e.palette[s].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[s].contrastText}}}})),{props:s=>s.iconColor===s.color,style:{[`& .${i.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:s=>s.iconColor===s.color&&s.color!=="default",style:{[`& .${i.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${i.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(D(["dark"])).map(([s])=>({props:{color:s,onDelete:!0},style:{[`&.${i.focusVisible}`]:{background:(e.vars||e).palette[s].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${i.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:z(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(D(["dark"])).map(([s])=>({props:{color:s,clickable:!0},style:{[`&:hover, &.${i.focusVisible}`]:{backgroundColor:(e.vars||e).palette[s].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${i.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${i.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${i.avatar}`]:{marginLeft:4},[`& .${i.avatarSmall}`]:{marginLeft:2},[`& .${i.icon}`]:{marginLeft:4},[`& .${i.iconSmall}`]:{marginLeft:2},[`& .${i.deleteIcon}`]:{marginRight:5},[`& .${i.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(D()).map(([s])=>({props:{variant:"outlined",color:s},style:{color:(e.vars||e).palette[s].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[s].mainChannel} / 0.7)`:z(e.palette[s].main,.7)}`,[`&.${i.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:z(e.palette[s].main,e.palette.action.hoverOpacity)},[`&.${i.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.focusOpacity})`:z(e.palette[s].main,e.palette.action.focusOpacity)},[`& .${i.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[s].mainChannel} / 0.7)`:z(e.palette[s].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[s].main}}}}))]}})),Be=pe("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:s}=e,{size:n}=s;return[t.label,t[`label${x(n)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function ie(e){return e.key==="Backspace"||e.key==="Delete"}const De=u.forwardRef(function(t,s){const n=ze({props:t,name:"MuiChip"}),{avatar:d,className:c,clickable:f,color:o="default",component:l,deleteIcon:v,disabled:y=!1,icon:j,label:S,onClick:p,onDelete:C,onKeyDown:N,onKeyUp:b,size:A="medium",variant:k="filled",tabIndex:w,skipFocusWhenDisabled:F=!1,slots:T={},slotProps:h={},...r}=n,$=u.useRef(null),M=Fe($,s),L=m=>{m.stopPropagation(),C&&C(m)},J=m=>{m.currentTarget===m.target&&ie(m)&&m.preventDefault(),N&&N(m)},X=m=>{m.currentTarget===m.target&&C&&ie(m)&&C(m),b&&b(m)},q=f!==!1&&p?!0:f,Q=q||C?ne:l||"div",Y={...n,component:Q,disabled:y,size:A,color:o,iconColor:u.isValidElement(j)&&j.props.color||o,onDelete:!!C,clickable:q,variant:k},E=Pe(Y),fe=Q===ne?{component:l||"div",focusVisibleClassName:E.focusVisible,...C&&{disableRipple:!0}}:{};let ae=null;C&&(ae=v&&u.isValidElement(v)?u.cloneElement(v,{className:B(v.props.className,E.deleteIcon),onClick:L}):a.jsx(Me,{className:E.deleteIcon,onClick:L}));let se=null;d&&u.isValidElement(d)&&(se=u.cloneElement(d,{className:B(E.avatar,d.props.className)}));let oe=null;j&&u.isValidElement(j)&&(oe=u.cloneElement(j,{className:B(E.icon,j.props.className)}));const te={slots:T,slotProps:h},[xe,me]=le("root",{elementType:Le,externalForwardedProps:{...te,...r},ownerState:Y,shouldForwardComponentProp:!0,ref:M,className:B(E.root,c),additionalProps:{disabled:q&&y?!0:void 0,tabIndex:F&&y?-1:w,...fe},getSlotProps:m=>({...m,onClick:I=>{var O;(O=m.onClick)==null||O.call(m,I),p==null||p(I)},onKeyDown:I=>{var O;(O=m.onKeyDown)==null||O.call(m,I),J==null||J(I)},onKeyUp:I=>{var O;(O=m.onKeyUp)==null||O.call(m,I),X==null||X(I)}})}),[ge,he]=le("label",{elementType:Be,externalForwardedProps:te,ownerState:Y,className:E.label});return a.jsxs(xe,{as:Q,...me,children:[se||oe,a.jsx(ge,{...he,children:S}),ae]})}),Ve=(e=8)=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="abcdefghijklmnopqrstuvwxyz",n="0123456789",d=t+s+n;let c="";c+=t[Math.floor(Math.random()*t.length)],c+=s[Math.floor(Math.random()*s.length)],c+=n[Math.floor(Math.random()*n.length)];for(let f=c.length;f<e;f++)c+=d[Math.floor(Math.random()*d.length)];return c.split("").sort(()=>.5-Math.random()).join("")},Z=[{name:"Support Staff",id:0},{name:"Category Manager",id:1},{name:"Tool Curator",id:2}],Ue=({refreshAdmins:e})=>{const[t,s]=V.useState(!1),[n,d]=u.useState(!1),[c,f]=u.useState(""),[o,l]=u.useState({first_name:"",last_name:"",email:"",role:""}),v=h=>{const{name:r,value:$}=h.target;l(M=>({...M,[r]:$}))},y=()=>{s(!0)},j=()=>{s(!1),l({first_name:"",last_name:"",email:"",role:""})},[S,p]=u.useState({open:!1,message:"",severity:"info"}),C=(h,r)=>{p({open:!0,message:h,severity:r})},N=()=>{p(h=>({...h,open:!1})),d(!1),s(!1)},[b,A]=u.useState({first_name:!1,last_name:!1,email:!1,role:!1}),k=h=>{A(r=>({...r,[h]:!0}))},w=h=>{A(r=>({...r,[h]:!1}))},F=()=>Object.values(o).every(h=>typeof h=="string"?h.trim()!=="":h!=null),T=async()=>{if(d(!0),!F()){d(!1),C("Please input all fields","warning");return}try{const r=await P.post("/api/admin/create",{...o,password:c});r.data&&(C(r.data.message,"success"),setTimeout(()=>{e()},2e3))}catch(r){if(r.response.data.error){console.log(r),d(!1),C(r.response.data.error,"error");return}}};return u.useEffect(()=>{f(Ve())},[]),a.jsxs("div",{children:[a.jsx(_,{disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:y,children:"Add Admin"}),a.jsxs(U,{open:t,onClose:j,"aria-describedby":"add-admin-dialog-description",children:[a.jsx(H,{open:S.open,message:S.message,severity:S.severity,onClose:N}),a.jsx(K,{children:a.jsxs("div",{className:"flex flex-col gap-[8px]",children:[a.jsx(g,{fontWeight:500,fontSize:24,color:"#1D1F2C",children:"Add Admin"}),a.jsx(g,{fontWeight:400,fontSize:16,color:"#667085",children:"An email will be sent to this user to join the platform and control the post from these admin panel."})]})}),a.jsx(G,{children:a.jsxs("div",{className:"flex flex-col justify-center gap-[16px] ",children:[a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.first_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"First Name"}),a.jsx(R,{onChange:v,onFocus:()=>k("first_name"),onBlur:()=>w("first_name"),focused:b.first_name,name:"first_name",value:o==null?void 0:o.first_name,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.last_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Last Name"}),a.jsx(R,{onChange:v,onFocus:()=>k("last_name"),onBlur:()=>w("last_name"),focused:b.last_name,name:"last_name",value:o==null?void 0:o.last_name,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.email?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Email"}),a.jsx(R,{onChange:v,onFocus:()=>k("email"),onBlur:()=>w("email"),focused:b.email,name:"email",value:o==null?void 0:o.email,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsxs("div",{children:[a.jsx(g,{fontWeight:500,sx:{color:"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Role"}),a.jsx(R,{select:!0,name:"role",value:o.role,onChange:v,size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},children:Z==null?void 0:Z.map(h=>a.jsx(W,{value:h.name,children:h.name},h.id))})]}),F()&&a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Password"}),a.jsx(R,{disabled:!0,name:"password",value:c,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsx(_,{disabled:n,disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:T,children:n?"Adding...":"Add Admin"})]})})]})]})},Ke=({adminData:e,refreshAdmins:t})=>{const[s,n]=V.useState(!1),[d,c]=u.useState(!1),f=()=>{n(!0)},o=()=>{n(!1)},[l,v]=u.useState({open:!1,message:"",severity:"info"}),y=(p,C)=>{v({open:!0,message:p,severity:C})},j=()=>{v(p=>({...p,open:!1})),c(!1),n(!1)},S=async()=>{c(!0);try{const p=await P.delete(`/api/admin/delete/${e._id}`);p.data.success&&(y(p.data.message,"success"),setTimeout(()=>{t()},2e3))}catch(p){if(p.response.data.error){console.log(p),c(!1),y(p.response.data.error,"error");return}}};return a.jsxs("div",{children:[a.jsxs("div",{onClick:f,className:"flex gap-[8px] ",children:[a.jsx("img",{src:Ae,className:"w-[20px] h-[20px] pt-[2.5px]"}),a.jsx(g,{fontWeight:400,fontSize:14,fontFamily:"Open Sans, sans-serif",color:"#00000A",children:"Remove Admin"})]}),a.jsxs(U,{open:s,onClose:o,"aria-describedby":"delete-dialog-description",children:[a.jsx(H,{open:l.open,message:l.message,severity:l.severity,onClose:j}),a.jsx(K,{children:a.jsx("div",{className:"flex justify-end",children:a.jsx(_,{sx:{color:"#FA9E9E",borderColor:"#FA9E9E",borderRadius:"8px",width:"10px",height:"40px"},onClick:o,variant:"outlined",children:a.jsx(ee,{className:"w-[1.5rem] h-[1.5rem] "})})})}),a.jsx(G,{sx:{width:"379px"},children:a.jsxs("div",{className:"flex flex-col gap-[2rem]",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:Ee})}),a.jsxs("div",{className:"flex flex-col gap-[1rem] justify-center text-center",children:[a.jsx(g,{fontWeight:400,fontSize:22,color:"#00000A",children:"Are you sure you want to Remove this Admin?"}),a.jsx(g,{fontWeight:400,fontSize:14,color:"#55555C",children:"Removing this admin means all records associated with this admin would no longer be accessible. Please note this action cannot be undone."})]})]})}),a.jsx("div",{className:"p-[20px]",children:a.jsx(_,{onClick:S,fullWidth:!0,variant:"outlined",sx:{borderRadius:"8px",backgroundColor:"#FBE9E9",borderColor:"#D42620",textTransform:"capitalize",fontFamily:"Open Sans, sans-serif",color:"#D42620"},children:d?"Removing...":"Remove Admin"})})]})]})};function ce(e){return ue({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9A7.902 7.902 0 0 1 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1A7.902 7.902 0 0 1 20 12c0 4.42-3.58 8-8 8z"},child:[]}]})(e)}function de(e){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3.06 13a9 9 0 1 0 .49 -4.087"},child:[]},{tag:"path",attr:{d:"M3 4.001v5h5"},child:[]},{tag:"path",attr:{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"},child:[]}]})(e)}const Ge=({adminData:e,refreshAdmins:t})=>{const[s,n]=V.useState(!1),[d,c]=u.useState(!1),f=()=>{n(!0)},o=()=>{n(!1)},[l,v]=u.useState({open:!1,message:"",severity:"info"}),y=(p,C)=>{v({open:!0,message:p,severity:C})},j=()=>{v(p=>({...p,open:!1})),c(!1),n(!1)},S=async()=>{c(!0);try{const p=await P.put(`/api/admin/${e.suspended?"reinstate":"suspend"}/${e._id}`);p.data.success&&(y(p.data.message,"success"),setTimeout(()=>{t()},2e3))}catch(p){if(p.response.data.error){console.log(p),c(!1),y(p.response.data.error,"error");return}}};return a.jsxs("div",{children:[a.jsxs("div",{onClick:f,className:"flex gap-[8px] ",children:[e.suspended?a.jsx(de,{className:"w-[20px] h-[20px] pt-[2.5px]"}):a.jsx(ce,{className:"w-[20px] h-[20px] pt-[2.5px]"}),a.jsxs(g,{fontWeight:400,fontSize:14,fontFamily:"Open Sans, sans-serif",color:"#00000A",children:[e.suspended?"Reinstate":"Suspend"," Admin"]})]}),a.jsxs(U,{open:s,onClose:o,"aria-describedby":"suspend-dialog-description",children:[a.jsx(H,{open:l.open,message:l.message,severity:l.severity,onClose:j}),a.jsx(K,{children:a.jsx("div",{className:"flex justify-end",children:a.jsx(_,{sx:{color:"#FA9E9E",borderColor:"#FA9E9E",borderRadius:"8px",width:"10px",height:"40px"},onClick:o,variant:"outlined",children:a.jsx(ee,{className:"w-[1.5rem] h-[1.5rem] "})})})}),a.jsx(G,{sx:{width:"379px"},children:a.jsxs("div",{className:"flex flex-col gap-[2rem]",children:[a.jsx("div",{className:"flex justify-center",children:e.suspended?a.jsx(de,{className:"w-[131px] h-[106px]"}):a.jsx(ce,{className:"w-[131px] h-[106px]"})}),a.jsxs("div",{className:"flex flex-col gap-[1rem] justify-center text-center",children:[a.jsxs(g,{fontWeight:400,fontSize:22,color:"#00000A",children:["Are you sure you want to"," ",e.suspended?"Reinstate":"Suspend"," this Admin?"]}),a.jsx(g,{fontWeight:400,fontSize:14,color:"#55555C",children:e.suspended?"Reinstating this admin will restore access to all records previously associated with them.":"Suspending this admin will make all records associated with them inaccessible until reinstated."})]})]})}),a.jsx("div",{className:"p-[20px]",children:a.jsx(_,{onClick:S,fullWidth:!0,variant:"outlined",sx:{borderRadius:"8px",backgroundColor:e.suspended?"#E7F3FE":"#FBE9E9",borderColor:e.suspended?"#0167C4":"#D42620",color:e.suspended?"#0167C4":"#D42620",textTransform:"capitalize",fontFamily:"Open Sans, sans-serif"},children:d?e.suspended?"Reinstating...":"Suspending...":e.suspended?"Reinstate Admin":"Suspend Admin"})})]})]})},He=["support staff","Admin 2","Admin 3","Admin 4","Admin 5"],Je=({adminData:e,refreshAdmins:t})=>{const[s,n]=V.useState(!1),[d,c]=u.useState(!1),[f,o]=u.useState({first_name:"",last_name:"",email:"",suspended:"",role:"",_id:""}),[l,v]=u.useState({first_name:"",last_name:"",email:"",suspended:"",role:"",_id:""}),y=()=>{n(!0)},j=()=>{n(!1)},[S,p]=u.useState({open:!1,message:"",severity:"info"}),C=(r,$)=>{p({open:!0,message:r,severity:$})},N=()=>{p(r=>({...r,open:!1})),c(!1),n(!1)},[b,A]=u.useState({first_name:!1,last_name:!1,email:!1,role:!1}),k=r=>{A($=>({...$,[r]:!0}))},w=r=>{A($=>({...$,[r]:!1}))},F=r=>{const{name:$,value:M}=r.target;v(L=>({...L,[$]:M}))},T=async()=>{c(!0);try{const r=await P.put(`/api/admin/update/${e._id}`,l);r.data.success&&(C(r.data.message,"success"),setTimeout(()=>{t()},2e3))}catch(r){if(r.response.data.error){console.log(r),c(!1),C(r.response.data.error,"error");return}}};u.useEffect(()=>{o(e),v(e)},[]);const h=()=>l.first_name!==f.first_name||l.last_name!==f.last_name||l.role!==f.role||l.email!==f.email;return a.jsxs("div",{children:[a.jsxs("div",{onClick:y,className:"flex gap-[8px] ",children:[a.jsx("img",{src:Ne,className:"w-[20px] h-[20px] pt-[2.5px]"}),a.jsx(g,{fontWeight:400,fontSize:14,fontFamily:"Open Sans, sans-serif",color:"#00000A",children:"Edit Admin"})]}),a.jsxs(U,{open:s,onClose:j,"aria-describedby":"edit-dialog-description",children:[a.jsx(H,{open:S.open,message:S.message,severity:S.severity,onClose:N}),a.jsx(K,{children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx(g,{fontWeight:500,fontSize:24,color:"#1D1F2C",children:"Edit Admin"}),a.jsx(_,{sx:{color:"#FA9E9E",borderColor:"#FA9E9E",borderRadius:"8px",width:"10px",height:"40px"},onClick:j,variant:"outlined",children:a.jsx(ee,{className:"w-[1.5rem] h-[1.5rem] "})})]})}),a.jsx(G,{sx:{width:"379px"},children:a.jsxs("div",{className:"flex flex-col justify-center gap-[16px] ",children:[a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.first_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"First Name"}),a.jsx(R,{onChange:F,onFocus:()=>k("first_name"),onBlur:()=>w("first_name"),focused:b.first_name,name:"first_name",value:l==null?void 0:l.first_name,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.last_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Last Name"}),a.jsx(R,{onChange:F,onFocus:()=>k("last_name"),onBlur:()=>w("last_name"),focused:b.last_name,name:"last_name",value:l==null?void 0:l.last_name,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.email?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Email"}),a.jsx(R,{onChange:F,onFocus:()=>k("email"),onBlur:()=>w("email"),focused:b.email,name:"email",value:l==null?void 0:l.email,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),a.jsxs("div",{children:[a.jsx(g,{fontWeight:600,sx:{color:b.role?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Role"}),a.jsx(R,{select:!0,onChange:F,onFocus:()=>k("role"),onBlur:()=>w("role"),focused:b.role,name:"role",value:l==null?void 0:l.role,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},children:He.map(r=>a.jsx(W,{value:r,children:r},r))})]}),a.jsx(_,{disabled:d||!h(),disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:T,children:d?"Saving...":"Save Changes"})]})})]})]})},Xe=({adminDetails:e,refreshAdmins:t})=>{const[s,n]=u.useState(null),d=!!s,c=o=>{n(o.currentTarget)},f=()=>{n(null)};return a.jsxs(a.Fragment,{children:[a.jsx(Oe,{onClick:c,children:a.jsx(ve,{})}),a.jsx(_e,{anchorEl:s,open:d,onClose:f,PaperProps:{sx:{borderRadius:2,width:"170px"}},sx:{paddingX:".5rem"},children:a.jsxs("div",{className:"flex flex-col px-[12px] ",children:[a.jsx(W,{children:a.jsx(Je,{adminData:e,refreshAdmins:t})}),a.jsx(re,{}),a.jsx(W,{children:a.jsx(Ge,{adminData:e,refreshAdmins:t})}),a.jsx(re,{}),a.jsx(W,{children:a.jsx(Ke,{adminData:e,refreshAdmins:t})})]})})]})},la=()=>{const[e,t]=u.useState(),[s,n]=u.useState(),[d,c]=u.useState(!0),f=async()=>{c(!0);try{const o=await P.get("/api/admin/all");if(o.data.success){t(o.data.data);return}}catch(o){console.error(o)}finally{c(!1)}};return u.useEffect(()=>{f();const o=localStorage.getItem("adminData");if(o){const l=JSON.parse(o);n(l)}},[]),a.jsxs(Ce,{children:[a.jsx(Te,{title:"Encore AI - Admin Users"}),a.jsx(be,{page:"Manage Admins",children:a.jsxs("div",{className:"flex gap-[1rem] items-center",children:[a.jsx(je,{color:"#777777",size:20}),a.jsx(Ue,{refreshAdmins:f})]})}),a.jsx("div",{className:"px-[33.5px] mx-[2rem] my-[1rem]",children:a.jsxs("div",{className:" p-[1rem] ",children:[a.jsx(g,{fontWeight:400,fontSize:16,color:"#667085",children:"Add new admins, Assign/remove roles, Edit admin details"}),a.jsx("div",{className:"h-[600px] overflow-y-auto",children:e==null?void 0:e.map(o=>a.jsxs("div",{className:"flex justify-between items-center mt-[.5rem] border-[1px] border-[#CCCCCE] p-[1rem] rounded-[8px]",children:[a.jsxs("div",{className:"flex gap-[12px]",children:[a.jsx(ye,{sx:{backgroundColor:"#55555C",height:"44px",width:"44px"},children:a.jsx(g,{color:"#FFFFFF",fontSize:20,fontWeight:400,children:Se(`${o.first_name} ${o.last_name}`)})}),a.jsxs("div",{className:"flex flex-col gap-[7px] ",children:[a.jsxs(g,{fontWeight:700,fontSize:13,color:"#302F37",children:[o.first_name," ",o.last_name," ",(s==null?void 0:s._id)===o._id&&"(you)"]}),a.jsx(g,{fontWeight:400,fontSize:10,color:"#808084",sx:{textTransform:"uppercase"},children:o.role}),a.jsx(g,{fontWeight:400,fontSize:10,color:"#808084",children:o.email})]})]}),(s==null?void 0:s._id)!==o._id&&a.jsx(De,{label:o.suspended?"Suspended":"Active",sx:{fontFamily:"Open Sans, sans-serif",fontWeight:500,fontSize:14,backgroundColor:o.suspended?"#ffcdd2":"#c8e6c9",color:o.suspended?"#d32f2f":"#2e7d32"}}),(s==null?void 0:s._id)!==o._id&&a.jsx(Xe,{adminDetails:o,refreshAdmins:f})]}))})]})})]})};export{la as default};
