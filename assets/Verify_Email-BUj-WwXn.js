import{r as o,j as e,u as j}from"./index-Dz1OiEwP.js";import{A as v}from"./Auth-SqY_ABiK.js";import{a as S,T}from"./Toast-CIJJY5AF.js";import{B as E}from"./Box-DNmHB_Tb.js";import{T as m,B as w,a as O}from"./axiosInstance-B1e5OFV0.js";import{D as b}from"./DynamicTitle-BNlEasHI.js";import{D as I}from"./Divider-1oHlqpFR.js";const F=({onChange:f})=>{const[p,d]=o.useState(Array(6).fill("")),i=o.useRef([]),l=(n,s)=>{var c;if(!/^[0-9]?$/.test(n))return;const t=[...p];t[s]=n,d(t),f==null||f(t.join("")),n&&s<5&&((c=i.current[s+1])==null||c.focus())},u=(n,s)=>{var t;n.key==="Backspace"&&!p[s]&&s>0&&((t=i.current[s-1])==null||t.focus())};return e.jsx(E,{display:"flex",gap:2,children:p.map((n,s)=>e.jsx(S,{sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},type:"password",value:n,inputRef:t=>i.current[s]=t,onChange:t=>l(t.target.value,s),onKeyDown:t=>u(t,s),inputProps:{maxLength:1,inputMode:"numeric",style:{textAlign:"center",fontSize:"20px",width:"50px",padding:"12px"}}},s))})},V=()=>{const f=j(),[x,p]=o.useState(""),[d,i]=o.useState(!1),[l,u]=o.useState(300);o.useEffect(()=>{if(l<=0)return;const r=setInterval(()=>{u(a=>a-1)},1e3);return()=>clearInterval(r)},[l]);const n=r=>{const a=Math.floor(r/60),h=r%60;return`${a}:${h<10?"0"+h:h}`},[s,t]=o.useState({open:!1,message:"",severity:"info"}),c=(r,a)=>{t({open:!0,message:r,severity:a})},g=()=>{t(r=>({...r,open:!1})),i(!1)},y=async()=>{if(i(!0),!x){i(!1),c("Please input all fields","warning");return}const r=localStorage.getItem("adminId");try{const a=await O.post(`/api/admin/verify-forgotPassword/${r}`,{otp:x});a.data.success&&(c(a.data.message,"success"),setTimeout(()=>{f("/dashboard")},2e3))}catch(a){console.error("Verify forgot password error:",a),c("An error occurred","error");return}};return o.useEffect(()=>{if(l<=0)return;const r=setInterval(()=>{u(a=>a-1)},1e3);return()=>clearInterval(r)},[l]),e.jsxs(v,{children:[e.jsx(T,{open:s.open,message:s.message,severity:s.severity,onClose:g}),e.jsx(b,{title:"Encore AI - Verify Email"}),e.jsx("div",{className:"flex justify-center items-center h-[90vh]",children:e.jsxs("div",{className:"bg-[white] w-[602px] h-[484px] flex gap-[64px] flex-col p-[40px]",children:[e.jsxs("div",{className:"flex flex-col gap-[40px]",children:[e.jsxs("div",{className:"flex flex-col gap-[12px]",children:[e.jsx(m,{fontWeight:500,sx:{fontFamily:"Open Sans, sans-serif"},fontSize:36,children:"Verify your Email Address"}),e.jsx(m,{fontWeight:400,fontSize:16,sx:{color:"#808084",fontFamily:"Open Sans, sans-serif"},children:"Check your mail for an OTP sent to verify"})]}),e.jsx(I,{}),e.jsxs("div",{className:"flex flex-col gap-[18px]",children:[e.jsxs("div",{className:"flex flex-col gap-[24px]",children:[e.jsx(m,{fontWeight:400,fontSize:16,sx:{color:"#808084",fontFamily:"Open Sans, sans-serif"},children:"Enter in OTP sent to your mail"}),e.jsx(F,{onChange:r=>p(r)})]}),e.jsx("div",{className:"bg-[#F0EEFF] py-[8px] px-[12px] rounded-[12px] w-[150px]",children:e.jsxs(m,{fontWeight:400,sx:{color:"#1D2739",fontFamily:"Open Sans, sans-serif"},fontSize:12,color:"#755AE2",children:["OTP Expires in"," ",e.jsx("span",{className:"text-[#0167C4]",children:n(l)})]})})]})]}),e.jsx(w,{disabled:x.length!==6||d,onClick:y,variant:"contained",disableElevation:!0,sx:{padding:"16px",width:"444px",borderRadius:"12px",backgroundColor:"black",textTransform:"capitalize",fontFamily:"Open Sans, sans-serif"},children:d?"Verifying...":"Verify"})]})})]})};export{V as default};
