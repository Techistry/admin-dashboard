import{a as M,r as i,u as k,j as e}from"./index-Dz1OiEwP.js";import{P as $,N as A}from"./Pages-GQhLz8jZ.js";import{I as P}from"./index-bsn1gdTp.js";import{B as F,T as d,a as j}from"./axiosInstance-B1e5OFV0.js";import{T as L,a as f}from"./Toast-CIJJY5AF.js";import{T as D}from"./Tooltip-Yp0Xx7qT.js";import{S as v}from"./Skeleton-DYX3uBd8.js";import{D as G}from"./Divider-1oHlqpFR.js";import{M as U}from"./MenuItem-Yjv2Ec7j.js";import"./iconBase--opDvRN2.js";const se=()=>{var T;const{id:_}=M(),[n,E]=i.useState(),[a,h]=i.useState({name:"",description:"",category_id:{_id:"",name:""},demo_url:"",image:"",_id:""}),[r,z]=i.useState({name:"",description:"",category_id:{_id:"",name:""},demo_url:"",image:"",_id:""}),[l,c]=i.useState(!0),[o,C]=i.useState({name:!1,description:!1,demo_url:!1,category:!1}),S=k(),m=s=>{C(t=>({...t,[s]:!0}))},u=s=>{C(t=>({...t,[s]:!1}))},x=s=>{const{name:t,value:b}=s.target;if(t==="category"){const p=n==null?void 0:n.find(y=>y._id===b);p&&h(y=>({...y,category_id:p}))}else h(p=>({...p,[t]:b}))},[g,w]=i.useState({open:!1,message:"",severity:"info"}),N=(s,t)=>{w({open:!0,message:s,severity:t})},O=()=>{w(s=>({...s,open:!1})),c(!1)},R=async()=>{c(!0);try{const s=await j.put(`/api/tool/edit/${a._id}`,a);s.data.success&&(N(s.data.message,"success"),setTimeout(()=>{S(`/tool/view/${_}`)},2e3))}catch(s){if(s.response.data.success){console.log(s),c(!1),N(s.response.data.message,"error");return}}},W=async()=>{try{const s=await j.get(`/api/tool/${_}`);s.data.success&&(h(s.data.data),z(s.data.data))}catch(s){console.error(s)}finally{c(!1)}},B=async()=>{try{const s=await j.get("/api/category/all");s.data.success&&E(s.data.data)}catch(s){console.error(s)}};i.useEffect(()=>{W(),B()},[]),i.useEffect(()=>{a.name&&(document.title=`Encore AI - Edit ${a.name}`)},[a.name]);const I=()=>a.name!==r.name||a.description!==r.description||a.category_id.name!==r.category_id.name||a.demo_url!==r.demo_url;return e.jsxs($,{children:[e.jsx(A,{page:"Tool Management",component:`${r.name}`,edit:!0}),e.jsxs("div",{className:"px-[33.5px]",children:[e.jsx(L,{open:g.open,message:g.message,severity:g.severity,onClose:O}),e.jsx("div",{className:"flex justify-start mt-[1rem]",children:e.jsx(D,{title:"Go back",children:e.jsx(F,{sx:{color:"#808084",borderColor:"#808084",borderRadius:"8px",width:"10px",height:"30px"},onClick:()=>S(-1),variant:"outlined",children:e.jsx(P,{className:"w-[1.5rem] h-[1.5rem]"})})})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"flex flex-col gap-[10px] w-[590px]",children:[l?e.jsx(v,{variant:"circular",width:48,height:48}):e.jsx("img",{src:r.image,className:"w-[48px] h-[48px]"}),l?e.jsx(v,{width:300,height:32}):e.jsx(d,{fontWeight:500,fontSize:24,color:"#302F37",children:r.name})]})}),e.jsx("div",{className:"flex justify-center my-[1rem]",children:e.jsx(G,{sx:{width:"620px"}})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-[590px]",children:l?e.jsx("div",{className:"flex flex-col gap-4",children:[...Array(4)].map((s,t)=>e.jsx(v,{variant:"rectangular",width:"100%",height:56,sx:{borderRadius:"8px"}},t))}):e.jsxs("div",{className:"flex flex-col justify-center gap-[16px]",children:[e.jsxs("div",{children:[e.jsx(d,{fontWeight:600,sx:{color:o.name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Name"}),e.jsx(f,{onChange:x,onFocus:()=>m("name"),onBlur:()=>u("name"),focused:o.name,name:"name",value:a==null?void 0:a.name,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(d,{fontWeight:600,sx:{color:o.description?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Description"}),e.jsx(f,{onChange:x,onFocus:()=>m("description"),onBlur:()=>u("description"),focused:o.description,name:"description",value:a==null?void 0:a.description,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(d,{fontWeight:600,sx:{color:o.category?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Category"}),e.jsx(f,{select:!0,onChange:x,onFocus:()=>m("category"),onBlur:()=>u("category"),focused:o.category,name:"category",value:((T=a==null?void 0:a.category_id)==null?void 0:T._id)||"",type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},children:n==null?void 0:n.map(s=>e.jsx(U,{value:s._id,children:s.name},s._id))})]}),e.jsxs("div",{children:[e.jsx(d,{fontWeight:600,sx:{color:o.demo_url?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Demo URL"}),e.jsx(f,{onChange:x,onFocus:()=>m("demo_url"),onBlur:()=>u("demo_url"),focused:o.demo_url,name:"demo_url",value:a==null?void 0:a.demo_url,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsx(F,{disabled:!I(),disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:R,children:l?"Saving...":"Save Changes"})]})})})]})]})};export{se as default};
