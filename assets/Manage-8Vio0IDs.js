import{R as $,r as i,j as e,u as Y}from"./index-Dz1OiEwP.js";import{D as W,a as k,b as P,c as R,P as Q,N as X,I as G}from"./Pages-GQhLz8jZ.js";import{T as D,a as z}from"./Toast-CIJJY5AF.js";import{B as w,T as n,a as N}from"./axiosInstance-B1e5OFV0.js";import{B as E}from"./Box-DNmHB_Tb.js";import{M as H}from"./MenuItem-Yjv2Ec7j.js";import{F as q}from"./index-B-aGfNZb.js";import{A as J}from"./Actions-BEnp4jVk.js";import{D as K}from"./DynamicTitle-BNlEasHI.js";import{I as V}from"./InputAdornment-BKtt8Ofr.js";import{T as Z,a as ee,b as se,c as I,d as x,e as te}from"./TableRow-Bj2dfIuY.js";import{S as ae}from"./Skeleton-DYX3uBd8.js";import"./iconBase--opDvRN2.js";import"./Divider-1oHlqpFR.js";import"./delete-B1Bqz9gE.js";import"./edit-CJ-ANpoM.js";const oe=({refreshTools:j})=>{const[p,v]=$.useState(!1),[y,r]=i.useState(!1),[c,u]=i.useState({name:"",description:"",category:"",demo_url:"",image:""}),[h,g]=i.useState(),[l,C]=i.useState({name:!1,description:!1,demo_url:!1}),[m,S]=i.useState({open:!1,message:"",severity:"info"}),f=t=>{C(d=>({...d,[t]:!0}))},a=t=>{C(d=>({...d,[t]:!1}))},o=t=>{const{name:d,value:_}=t.target;u(T=>({...T,[d]:_}))},s=()=>Object.values({...c}).every(t=>t.trim()!==""),b=()=>{v(!0)},O=()=>{v(!1),u({name:"",description:"",category:"",demo_url:"",image:""}),r(!1)},F=(t,d)=>{S({open:!0,message:t,severity:d})},B=()=>{S(t=>({...t,open:!1})),r(!1)},A=async t=>{const d=t.target.files[0],_=new FormData;_.append("image",d);try{const T=await N.post("/api/upload-image",_);T.data.success?u(U=>({...U,image:T.data.imageUrl})):console.error("Upload failed")}catch(T){console.error("Error uploading file",T)}},M=async()=>{if(r(!0),!s()){r(!1),F("Please input all fields","warning");return}try{const d=await N.post("/api/tool/add",c);d.data.success&&(F(d.data.message,"success"),setTimeout(()=>{j(),O(),r(!1)},2e3))}catch(d){if(d.response.data.error){r(!1),F(d.response.data.error,"error");return}}},L=async()=>{try{const t=await N.get("/api/category/all");if(t.data.success){g(t.data.data);return}}catch(t){console.error(t)}finally{r(!1)}};return i.useEffect(()=>{L()},[]),e.jsxs("div",{children:[e.jsx(D,{open:m.open,message:m.message,severity:m.severity,onClose:B}),e.jsx(w,{disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:b,children:"Create New Tool"}),e.jsxs(W,{open:p,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{fontWeight:500,sx:{color:"#1D1F2C",fontFamily:"Open Sans, sans-serif"},fontSize:24,children:"Let's Create Your New A.I Tool"}),e.jsx(w,{sx:{color:"black"},onClick:O,children:e.jsx(P,{className:"w-[1.5rem] h-[1.5rem] "})})]}),e.jsx(n,{fontWeight:400,sx:{color:"#667085",fontFamily:"Open Sans, sans-serif"},fontSize:16,children:"Give us basic details about the A.I Tool you intend to send out."})]}),e.jsx(R,{sx:{paddingY:"64px",paddingX:"25px"},children:e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col gap-[15px]",children:[e.jsxs("div",{children:[e.jsx(n,{fontWeight:500,sx:{color:l.name?"#0167C4":"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Name"}),e.jsx(z,{onFocus:()=>f("name"),onBlur:()=>a("name"),focused:l.name,name:"name",value:c.name,onChange:o,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(n,{fontWeight:500,sx:{color:l.description?"#0167C4":"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Decription"}),e.jsx(z,{onFocus:()=>f("description"),onBlur:()=>a("description"),focused:l.description,name:"description",value:c.description,onChange:o,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(n,{fontWeight:500,sx:{color:"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Category"}),e.jsx(z,{select:!0,name:"category",value:c.category,onChange:o,size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},children:h==null?void 0:h.map(t=>e.jsx(H,{value:t._id,children:t.name},t._id))})]}),e.jsxs("div",{children:[e.jsx(n,{fontWeight:500,sx:{color:l.demo_url?"#0167C4":"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Demo URL"}),e.jsx(z,{onFocus:()=>f("demo_url"),onBlur:()=>a("demo_url"),focused:l.demo_url,name:"demo_url",value:c.demo_url,onChange:o,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(n,{fontWeight:500,sx:{color:l.demo_url?"#0167C4":"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Upload Image"}),e.jsx("input",{accept:"image/*",type:"file",onChange:A,style:{padding:"10px 0",border:"1px solid #c4c4c4",borderRadius:"8px",width:"100%"}})]}),e.jsx(w,{disabled:!s()||y,disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:M,children:y?"Creating...":"Create"})]})})})]})]})},ne=({refreshTools:j})=>{const[p,v]=i.useState(null),[y,r]=i.useState(!1),[c,u]=i.useState(!1),h=()=>{u(!0)},g=()=>{u(!1),r(!1)},[l,C]=i.useState({open:!1,message:"",severity:"info"}),m=(a,o)=>{C({open:!0,message:a,severity:o})},S=()=>{C(a=>({...a,open:!1})),r(!1)},f=async()=>{if(r(!0),!p){m("Please select file","warning");return}const a=new FormData;a.append("file",p);try{const o=await N.post("/api/import-tools",a);o.data.success&&(m(o.data.message,"success"),setTimeout(()=>{j(),g(),r(!1)},2e3))}catch(o){if(o.response.data.error){r(!1),m(o.response.data.error,"error");return}}};return e.jsxs("div",{children:[e.jsx(D,{open:l.open,message:l.message,severity:l.severity,onClose:S}),e.jsx(w,{disableElevation:!0,variant:"outlined",sx:{width:"165px",padding:"5px",borderRadius:"12px",borderColor:"#0167C4",textTransform:"capitalize",color:"#0167C4"},onClick:h,children:"Import Tools"}),e.jsxs(W,{open:c,onClose:g,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{variant:"h6",className:"text-center text-[#1A1A1A]",children:"Upload Excel File"}),e.jsx(w,{sx:{color:"black"},onClick:g,children:e.jsx(P,{className:"w-[1.5rem] h-[1.5rem] "})})]}),e.jsx(n,{fontWeight:400,sx:{color:"#667085",fontFamily:"Open Sans, sans-serif"},fontSize:16,children:"Import AI tools by uploading your spreadsheet here."})]}),e.jsx(R,{sx:{paddingY:"64px",paddingX:"25px"},children:e.jsxs("div",{className:"mt-[1rem]",children:[e.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:a=>{var o;return v(((o=a.target.files)==null?void 0:o[0])||null)},className:`block w-full text-sm text-gray-500 mb-[1rem]
                   file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0
                   file:text-sm file:font-semibold
                   file:bg-blue-50 file:text-blue-700
                   hover:file:bg-blue-100`}),e.jsx(w,{disabled:y,onClick:f,variant:"contained",sx:{textTransform:"capitalize",borderRadius:"9999px",height:"48px",width:"100%",background:"radial-gradient(circle, #2B91EE, #0167C4)"},children:y?"Uploading...":"Upload Excel"})]})})]})]})},ve=()=>{const j=Y(),[p,v]=i.useState(),[y,r]=i.useState(!0),[c,u]=i.useState(""),[h,g]=i.useState(0),[l,C]=i.useState(5),m=(s,b)=>{g(b)},S=s=>{C(parseInt(s.target.value,10)),g(0)},f=async()=>{r(!0);try{const s=await N.get("/api/tool/all");if(s.data.success){v(s.data.data);return}}catch(s){console.error(s)}finally{r(!1)}};i.useEffect(()=>{f()},[]);const a=i.useMemo(()=>c.trim()?p==null?void 0:p.filter(s=>`${s.name} ${s.category_id.name}`.toLowerCase().includes(c.toLowerCase())):p,[c,p]),o=i.useMemo(()=>{const s=h*l,b=s+l;return a==null?void 0:a.slice(s,b)},[a,h,l]);return e.jsxs(Q,{children:[e.jsx(K,{title:"Encore AI - Tools"}),e.jsx(X,{page:"Tool Management",children:e.jsxs("div",{className:"flex gap-[1rem] items-center",children:[e.jsx(G,{color:"#777777",size:20}),e.jsx(oe,{refreshTools:f})]})}),e.jsxs("div",{className:"px-[33.5px]",children:[e.jsxs("div",{className:"flex justify-between py-[1rem]",children:[e.jsx(z,{value:c,onChange:s=>u(s.target.value),placeholder:"Search A.I tools",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}},InputProps:{startAdornment:e.jsx(V,{position:"start",children:e.jsx(q,{})})}}),e.jsx(ne,{refreshTools:f})]}),e.jsxs("div",{className:"border-t-[1px] border-[#E5E5E6] ",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(Z,{rowsPerPageOptions:[5,10],component:"div",count:(a==null?void 0:a.length)||0,rowsPerPage:l,page:h,onPageChange:m,onRowsPerPageChange:S})}),e.jsxs(ee,{sx:{minWidth:650},"aria-label":"admin table",size:"small",children:[e.jsx(se,{children:e.jsxs(I,{sx:{backgroundColor:"#F0F2F5",height:"45px"},children:[e.jsx(x,{children:e.jsx(n,{fontWeight:500,fontSize:12,color:"#2B2B33",children:"Tool Name"})}),e.jsx(x,{align:"left",children:e.jsx(n,{fontWeight:500,fontSize:12,color:"#2B2B33",children:"Description"})}),e.jsx(x,{align:"left",children:e.jsx(n,{fontWeight:500,fontSize:12,color:"#2B2B33",children:"Cateogory"})}),e.jsx(x,{align:"left",children:e.jsx(n,{fontWeight:500,fontSize:12,color:"#2B2B33",children:"Demo Link"})}),e.jsx(x,{align:"left"})]})}),e.jsx(te,{children:y?Array.from({length:5}).map((s,b)=>e.jsx(I,{children:Array.from({length:6}).map((O,F)=>e.jsx(x,{children:e.jsx(ae,{variant:"text",width:"100%",height:30})},F))},b)):o&&o.length>0?o.map(s=>e.jsxs(I,{sx:{cursor:"pointer",height:"50px","&:last-child td, &:last-child th":{border:0}},children:[e.jsx(x,{onClick:()=>j(`/tool/view/${s._id}`),children:e.jsxs("div",{className:"flex gap-[12px] items-center",children:[e.jsx("img",{src:s.image,alt:`Logo for ${s.name}`,height:25,width:25}),e.jsx(n,{color:"#808084",sx:{fontFamily:"Open Sans, sans-serif"},fontWeight:400,fontSize:14,children:s.name})]})}),e.jsx(x,{align:"left",onClick:()=>j(`/tool/view/${s._id}`),sx:{maxWidth:300,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer"},children:e.jsx(n,{color:"#808084",sx:{fontFamily:"Open Sans, sans-serif",fontWeight:400,fontSize:14},children:s.description})}),e.jsx(x,{align:"left",onClick:()=>j(`/tool/view/${s._id}`),children:e.jsx(n,{color:"#808084",sx:{fontFamily:"Open Sans, sans-serif"},fontWeight:400,fontSize:14,children:s.category_id.name})}),e.jsx(x,{align:"left",children:e.jsx("div",{className:"bg-[#F0EEFF] rounded-[72px] py-[8px] pl-[12px] pr-[12px] w-[130px] overflow-hidden whitespace-nowrap text-ellipsis",children:e.jsx("a",{target:"_blank",href:s.demo_url,children:e.jsx(n,{color:"#755AE2",sx:{fontFamily:"Open Sans, sans-serif"},fontWeight:400,fontSize:14,children:s.demo_url})})})}),e.jsx(x,{align:"left",children:e.jsx(J,{toolDetails:s,refreshTools:f})})]},s._id)):e.jsx(I,{children:e.jsx(x,{colSpan:6,children:e.jsx(E,{textAlign:"center",py:4,children:e.jsx(n,{variant:"body1",color:"textSecondary",children:c?"No matching tools found.":"No tools found. Please create new tool."})})})})})]})]})]})]})};export{ve as default};
