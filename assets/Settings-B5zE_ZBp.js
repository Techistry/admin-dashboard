import{R as E,r,j as e}from"./index-Dz1OiEwP.js";import{D as T,a as I,b as P,c as R,P as J,N as L,I as U}from"./Pages-GQhLz8jZ.js";import{T as k,a as p}from"./Toast-CIJJY5AF.js";import{e as X}from"./edit-CJ-ANpoM.js";import{T as l,B as _,a as B}from"./axiosInstance-B1e5OFV0.js";import{T as Y}from"./Tooltip-Yp0Xx7qT.js";import{B as D}from"./Box-DNmHB_Tb.js";import{D as $}from"./DynamicTitle-BNlEasHI.js";import"./iconBase--opDvRN2.js";import"./Divider-1oHlqpFR.js";const K=()=>{const[t,h]=E.useState(!1),[d,x]=r.useState(!1),[m,g]=r.useState(""),[n,f]=r.useState({first_name:"",last_name:"",email:"",_id:""}),[s,F]=r.useState({first_name:"",last_name:"",email:"",_id:""}),[c,O]=r.useState({first_name:!1,last_name:!1,email:!1,password:!1}),[S,y]=r.useState({open:!1,message:"",severity:"info"}),j=a=>{O(o=>({...o,[a]:!0}))},v=a=>{O(o=>({...o,[a]:!1}))},i=a=>{const{name:o,value:N}=a.target;F(u=>({...u,[o]:N}))},w=()=>{h(!0)},C=()=>{h(!1)},b=(a,o)=>{y({open:!0,message:a,severity:o})},M=()=>{y(a=>({...a,open:!1})),x(!1)},A=async()=>{var o,N;x(!0);const a={};Object.keys(s).forEach(u=>{const z=u;s[z]!==n[z]&&(a[z]=s[z])});try{const u=await B.put(`/api/edit-profile/${n._id}`,{...a,password:m});u.data.success&&(b(u.data.message,"success"),localStorage.setItem("adminData",JSON.stringify(u.data.data)),setTimeout(()=>{C()},2e3))}catch(u){(N=(o=u.response)==null?void 0:o.data)!=null&&N.error?b(u.response.data.error,"error"):b("An unexpected error occurred","error")}finally{x(!1)}};r.useEffect(()=>{const a=localStorage.getItem("adminData");if(a)try{const o=JSON.parse(a);console.log("Parsed adminData:",o),f(o),F(o)}catch(o){console.error("Error parsing adminData",o)}},[]);const W=()=>n.first_name!==s.first_name||n.last_name!==s.last_name||n.email!==s.email;return e.jsxs("div",{children:[e.jsx(k,{open:S.open,message:S.message,severity:S.severity,onClose:M}),e.jsx(Y,{title:"Edit",children:e.jsx("div",{onClick:w,className:"cursor-pointer ",children:e.jsx("img",{src:X,className:"w-[17px] h-[17px] pt-[2.5px]"})})}),e.jsxs(T,{open:t,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(l,{fontWeight:500,sx:{color:"#1D1F2C",fontFamily:"Open Sans, sans-serif"},fontSize:24,children:"Edit Profile"}),e.jsx(_,{sx:{color:"black"},onClick:C,children:e.jsx(P,{className:"w-[1.5rem] h-[1.5rem] "})})]})}),e.jsx(R,{sx:{paddingY:"64px",paddingX:"25px"},children:e.jsx(D,{children:e.jsxs("div",{className:"flex flex-col gap-[15px]",children:[e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:c.first_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"First Name"}),e.jsx(p,{onChange:i,onFocus:()=>j("first_name"),onBlur:()=>v("first_name"),focused:c.first_name,name:"first_name",value:s==null?void 0:s.first_name,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:c.last_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Last Name"}),e.jsx(p,{onChange:i,onFocus:()=>j("last_name"),onBlur:()=>v("last_name"),focused:c.last_name,name:"last_name",value:s==null?void 0:s.last_name,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:c.email?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Email"}),e.jsx(p,{onChange:i,onFocus:()=>j("email"),onBlur:()=>v("email"),focused:c.email,name:"email",value:s==null?void 0:s.email,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),W()&&e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:c.password?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Password"}),e.jsx(p,{placeholder:"Enter current password to validate changes",onChange:a=>g(a.target.value),onFocus:()=>j("password"),onBlur:()=>v("password"),focused:c.password,name:"password",value:m,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsx(_,{disabled:d||!W(),disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:A,children:d?"Saving...":"Save"})]})})})]})]})},q=()=>{const[t,h]=E.useState(!1),[d,x]=r.useState(!1),[m,g]=r.useState({curPassword:"",newPassword:""}),[n,f]=r.useState({open:!1,message:"",severity:"info"}),s=(i,w)=>{f({open:!0,message:i,severity:w})},F=()=>{f(i=>({...i,open:!1})),x(!1)},c=i=>{const{name:w,value:C}=i.target;g(b=>({...b,[w]:C}))},O=()=>{h(!0)},S=()=>{h(!1),g({curPassword:"",newPassword:""})},y=localStorage.getItem("adminData"),j=y?JSON.parse(y):null,v=async()=>{try{x(!0);const i=await B.put(`api/admin/change-password/${j==null?void 0:j._id}`,m);i.data.success&&(s(i.data.message,"success"),setTimeout(()=>{h(!1)},2e3))}catch(i){if(i.response.data.error){console.log(i),x(!1),s(i.response.data.error,"error");return}}};return e.jsxs("div",{children:[e.jsx(_,{onClick:O,variant:"contained",disableElevation:!0,sx:{width:"373px",paddingX:"10px",paddingY:"10px",borderRadius:"12px",backgroundColor:"#1358A3",textTransform:"capitalize",fontFamily:"Open Sans, sans-serif"},children:e.jsx(l,{fontWeight:600,fontSize:14,fontFamily:"Open Sans, sans-serif",children:"Change password"})}),e.jsxs(T,{open:t,onClose:S,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(k,{open:n.open,message:n.message,severity:n.severity,onClose:F}),e.jsx(I,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{fontWeight:600,sx:{color:"#081421",fontFamily:"Open Sans, sans-serif"},fontSize:24,children:"Change password"}),e.jsx(_,{sx:{color:"black"},onClick:S,children:e.jsx(P,{className:"w-[1.5rem] h-[1.5rem] "})})]})}),e.jsx(R,{sx:{width:"550px"},children:e.jsx(D,{sx:{width:"100%"},children:e.jsxs("div",{className:"flex flex-col gap-[15px]",children:[e.jsxs("div",{children:[e.jsx(l,{fontWeight:400,sx:{color:"#1D2739",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Current password"}),e.jsx(p,{name:"curPassword",value:m.curPassword,onChange:c,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(l,{fontWeight:400,sx:{color:"#1D2739",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"New password"}),e.jsx(p,{name:"newPassword",value:m.newPassword,onChange:c,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsx(_,{onClick:v,disabled:d,fullWidth:!0,variant:"contained",sx:{borderRadius:"8px",backgroundColor:"#1358A3",textTransform:"capitalize",fontFamily:"Open Sans, sans-serif"},children:d?"Changing...":"Submit"})]})})})]})]})},ie=()=>{const[t,h]=r.useState(),[d,x]=r.useState({first_name:!1,last_name:!1,email:!1}),m=n=>{x(f=>({...f,[n]:!0}))},g=n=>{x(f=>({...f,[n]:!1}))};return r.useEffect(()=>{const n=localStorage.getItem("adminData");if(n){const f=JSON.parse(n);h(f)}},[]),e.jsxs(J,{children:[e.jsx($,{title:"Encore AI - Settings"}),e.jsx(L,{page:"Settings",children:e.jsx(U,{color:"#777777",size:20})}),e.jsx("div",{className:"px-[33.5px] h-[85vh]",children:e.jsx("div",{className:"flex justify-center mt-[2rem]",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-[8px]",children:[e.jsx(l,{fontWeight:500,fontSize:24,color:"#1D1F2C",children:"Admin Profile"}),e.jsx(l,{fontWeight:400,fontSize:16,color:"#667085",children:"These are your informations, you can make changes."})]}),e.jsx("div",{className:"",children:e.jsx(K,{})})]}),e.jsxs("div",{className:"flex flex-col gap-[15px] mt-[2rem]",children:[e.jsxs("div",{className:"flex gap-[15px]",children:[e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:d.first_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"First Name"}),e.jsx(p,{disabled:!0,onFocus:()=>m("first_name"),onBlur:()=>g("first_name"),focused:d.first_name,name:"first_name",value:t==null?void 0:t.first_name,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:d.last_name?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Last Name"}),e.jsx(p,{disabled:!0,onFocus:()=>m("last_name"),onBlur:()=>g("last_name"),focused:d.last_name,name:"last_name",value:t==null?void 0:t.last_name,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]})]}),e.jsxs("div",{className:"flex gap-[15px]",children:[e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:d.email?"#0167C4":"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Email"}),e.jsx(p,{disabled:!0,onFocus:()=>m("email"),onBlur:()=>g("email"),focused:d.email,name:"email",value:t==null?void 0:t.email,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(l,{fontWeight:600,sx:{color:"#00294E",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Role"}),e.jsx(p,{disabled:!0,name:"role",value:t==null?void 0:t.role,type:"text",size:"small",fullWidth:!0,sx:{width:"373px","& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]})]})]}),e.jsx("div",{className:"mt-[2rem] ",children:e.jsx(q,{})})]})})})]})};export{ie as default};
