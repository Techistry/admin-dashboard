import{R as N,r as n,j as e,u as M,b as $}from"./index-Dz1OiEwP.js";import{T as D,a as F}from"./Toast-CIJJY5AF.js";import{D as w,a as E,b as O,c as k}from"./Pages-GQhLz8jZ.js";import{e as U}from"./edit-CJ-ANpoM.js";import{T as u,B as y,a as z}from"./axiosInstance-B1e5OFV0.js";import{T as W}from"./Tooltip-Yp0Xx7qT.js";import{B as X}from"./Box-DNmHB_Tb.js";import{d as Y,a as q}from"./delete-B1Bqz9gE.js";const G=({categoryData:a,refreshCategory:c})=>{const[v,d]=N.useState(!1),[f,i]=n.useState(!1),[h,b]=n.useState({name:"",description:""}),[r,p]=n.useState({name:"",description:""}),[o,m]=n.useState({name:!1,description:!1}),[x,g]=n.useState({open:!1,message:"",severity:"info"}),j=s=>{m(l=>({...l,[s]:!0}))},t=s=>{m(l=>({...l,[s]:!1}))},C=s=>{const{name:l,value:I}=s.target;p(L=>({...L,[l]:I}))},B=()=>{d(!0)},S=()=>{d(!1),p({name:"",description:""})},T=(s,l)=>{g({open:!0,message:s,severity:l})},R=()=>{g(s=>({...s,open:!1})),i(!1)},A=async()=>{i(!0);try{const s=await z.put(`/api/category/edit/${a._id}`,r);s.data.success&&(T(s.data.message,"success"),setTimeout(()=>{S(),c()},2e3))}catch(s){if(s.response.data.error){console.log(s),i(!1),T(s.response.data.error,"error");return}}};n.useEffect(()=>{b(a),p(a)},[a]);const _=()=>r.name!==h.name||r.description!==h.description;return e.jsxs("div",{children:[e.jsx(D,{open:x.open,message:x.message,severity:x.severity,onClose:R}),e.jsx(W,{title:"Edit",children:e.jsx("div",{onClick:B,className:"cursor-pointer ",children:e.jsx("img",{src:U,className:"w-[17px] h-[17px] pt-[2.5px]"})})}),e.jsxs(w,{open:v,onClose:S,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(u,{fontWeight:500,sx:{color:"#1D1F2C",fontFamily:"Open Sans, sans-serif"},fontSize:24,children:"Edit Category"}),e.jsx(y,{sx:{color:"black"},onClick:S,children:e.jsx(O,{className:"w-[1.5rem] h-[1.5rem] "})})]}),e.jsx(u,{fontWeight:400,sx:{color:"#667085",fontFamily:"Open Sans, sans-serif"},fontSize:16,children:"Make Changes by giving us basic details about the Category."})]}),e.jsx(k,{sx:{paddingY:"64px",paddingX:"25px"},children:e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col gap-[15px]",children:[e.jsxs("div",{children:[e.jsx(u,{fontWeight:500,sx:{color:o.name?"#0167C4":"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Name of Category"}),e.jsx(F,{onFocus:()=>j("name"),onBlur:()=>t("name"),focused:o.name,name:"name",value:r.name,onChange:C,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsxs("div",{children:[e.jsx(u,{fontWeight:500,sx:{color:o.description?"#0167C4":"#55555C",fontFamily:"Open Sans, sans-serif"},fontSize:14,children:"Decription"}),e.jsx(F,{onFocus:()=>j("description"),onBlur:()=>t("description"),focused:o.description,name:"description",value:r.description,onChange:C,type:"text",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})]}),e.jsx(y,{disabled:f||!_(),disableElevation:!0,variant:"contained",sx:{width:"165px",padding:"10px",borderRadius:"12px",backgroundColor:"#0167C4",textTransform:"capitalize"},onClick:A,children:f?"Saving...":"Save"})]})})})]})]})},H=({categoryData:a,refreshCategories:c})=>{const[v,d]=N.useState(!1),[f,i]=n.useState(!1),h=M(),b=$(),r=()=>{d(!0)},p=()=>{d(!1)},[o,m]=n.useState({open:!1,message:"",severity:"info"}),x=(t,C)=>{m({open:!0,message:t,severity:C})},g=()=>{m(t=>({...t,open:!1})),i(!1),d(!1)},j=async()=>{i(!0);try{const t=await z.delete(`/api/category/delete/${a._id}`);t.data.success&&(x(t.data.message,"success"),setTimeout(()=>{b.pathname===`/category/view/${a._id}`?h(-1):c()},2e3))}catch(t){if(t.response.data.error){console.log(t),i(!1),x(t.response.data.error,"error");return}}};return e.jsxs("div",{children:[e.jsx(W,{title:"Delete",children:e.jsx("div",{onClick:r,className:"cursor-pointer ",children:e.jsx("img",{src:Y,className:"w-[17px] h-[17px] pt-[2.5px]"})})}),e.jsxs(w,{open:v,onClose:p,"aria-describedby":"delete-dialog-description",children:[e.jsx(D,{open:o.open,message:o.message,severity:o.severity,onClose:g}),e.jsx(E,{children:e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{sx:{color:"#FA9E9E",borderColor:"#FA9E9E",borderRadius:"8px",width:"10px",height:"40px"},onClick:p,variant:"outlined",children:e.jsx(O,{className:"w-[1.5rem] h-[1.5rem] "})})})}),e.jsx(k,{sx:{width:"379px"},children:e.jsxs("div",{className:"flex flex-col gap-[2rem]",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:q})}),e.jsxs("div",{className:"flex flex-col gap-[1rem] justify-center text-center",children:[e.jsx(u,{fontWeight:400,fontSize:22,color:"#00000A",children:"Are you sure to Delete this Category?"}),e.jsx(u,{fontWeight:400,fontSize:14,color:"#55555C",children:"All associated records will become inaccessible. This action is permanent and cannot be undone."})]})]})}),e.jsx("div",{className:"p-[20px]",children:e.jsx(y,{onClick:j,fullWidth:!0,variant:"outlined",sx:{borderRadius:"8px",backgroundColor:"#FBE9E9",borderColor:"#D42620",textTransform:"capitalize",fontFamily:"Open Sans, sans-serif",color:"#D42620"},children:f?"Deleting...":"Delete Category"})})]})]})},te=({categoryDetails:a,refreshCategories:c})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-[24px]",children:[e.jsx(G,{categoryData:a,refreshCategory:c}),e.jsx(H,{categoryData:a,refreshCategories:c})]})});export{te as A};
